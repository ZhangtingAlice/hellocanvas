<<!DOCTYPE html>
<html lang="en">
    <head>
		<title>"Quad Tree"</title>
		<p >四叉树</p>
        <meta charset="UTF-8"> 
	</head> 
    <body>
			<div> 矩阵：</div>
            1, 1, 1, 1, 2, 2, 3, 3,<br />
            1, 1, 1, 1, 2, 2, 3, 3,<br />
            1, 1, 1, 1, 4, 4, 5, 5,<br />
            1, 1, 1, 1, 4, 4, 5, 5,<br />
            6, 6, 7, 8,13,13,14,14,<br />
            6, 6, 9,10,13,13,14,14,<br />
           11,11,12,12,15,16,19,19,<br />
           11,11,12,12,17,18,19,19<br />	   
		<div>
			四叉树的四进制编码为：
		</div>      
	<script>
	 var r;
	 var c;
	 var m;
	 var d=new Array();
	 var i = [[0,0,0],[0,0,1],[0,1,0],[0,1,1],[1,0,0],[1,0,1],[1,1,0],[1,1,1]];
	 var j = [[0,0,0],[0,0,1],[0,1,0],[0,1,1],[1,0,0],[1,0,1],[1,1,0],[1,1,1]];
	 var mo=[[1,1,1,1,2,2,3,3],[1,1,1,1,2,2,3,3],[1,1,1,1,4,4,5,5],[1,1,1,1,4,4,5,5],[6,6,7,8,13,13,14,14],[6,6,7,8,13,13,14,14],[11,11,12,12,15,16,19,19],[11,11,12,12,17,18,19,19]];
    var f1=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
    var f2=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
    var c1,c2,c3;
    var th=[0,0,2,2,0,0,2,2,4,4,6,6,4,4,6,6];
    var ct1=[0,2,0,2,4,6,4,6,0,2,0,2,4,6,4,6];
	for(r=0;r<8;r++)
	{
		for(var c=0;c<8;c++)
		{
			var res1=i[r][0]*2+j[c][0];
			var res2=i[r][1]*2+j[c][1];
			var res3=i[r][2]*2+j[c][2];
			document.write(res1);
			document.write(res2);
			document.write(res3);
			document.write(" ");
		}
		document.write("<br>");
	}
     
    for(c1=0;c1<16;c1++)
	{
		for(c2=th[c1],r=0;r<2;r++)
		{
			for(c3=ct1[c1],c=0;c<2;c++)
			{
				if(ct1[c1]==2||ct1[c1]==6)
				{
				     if(((mo[c2+r][c3+c]!=mo[c2+r][c3-1+c])))
					 {
				 	   f1[c1]=1;
					 }
				}
				else
				{
                    if(((mo[c2+r][c3+c]!=mo[c2+r][c3+1+c])))
					 {
				 	   f1[c1]=1;
					 }					 
				}	
			}

		}
	}

    for(c1=0;c1<8;c1++)
	{
		for(c2=0;c2<8;c2++)
		{
			if((c2!=0)&&(c2!=7))
			{
			   if(mo[c1][c2-1]!=mo[c1][c2]&&mo[c1][c2+1]!=mo[c1][c2])
			   {
				   f2[c1*8+c2]=1;	   
			   }
			}
			if(c2==0)
			{
				 if(mo[c1][c2+1]!=mo[c1][c2])
			   {
				   f2[c1*8+c2]=1;
			   }
			}
			if(c2==7)
			{
			   if(mo[c1][c2-1]!=mo[c1][c2])
			   {
				   f2[c1*8+c2]=1;
			   }
			}
		}
	}
//第一层
    for(r=0;r<8;r++)
	{
		d[r]=new Array();

		for(c=0;c<8;c++)
		{
			var rt4=i[r][0]*2+j[c][0];
		
			d[r][c]=rt4;

		}
	}

//第二层
	for(m=0;m<16;m++)
	{
		if(f1[m])
		{
			for(c2=ct1[m],r=0;r<2;r++)
					{

				for(c3=th[m],c=0;c<2;c++)
						{
				          d[th[m]+r][ct1[m]+c]=d[th[m]+r][ct1[m]+c]*10+i[th[m]+r][1]*2+j[ct1[m]+c][1];
						}
					}
		}
	}

	//第三层
    for(m=0;m<64;m++)
	{
		
		if(f2[m])
		{
			var u1=Math.floor(m/8);
			var u2=Math.floor(m%8);
			result5=d[u1][u2]*10+i[u1][2]*2+j[u2][2];
		    d[u1][u2]=result5;
										
		}
	}

	document.write("转换后：<br/>"); 
    for(r=0;r<8;r++)
   {
	   for(c=0;c<8;c++)
	   {
        document.write("  "+d[r][c]+"  "); 
	   }
	document.write("<br>");
   }
  

    </script>

</body>
</html>